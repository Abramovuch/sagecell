# HG changeset patch
# Parent 9e8f484ff55f54e28200e8cb6d692b97d4d81562
Changes for Sage Cell Server 2.0

diff --git a/sage/misc/html.py b/sage/misc/html.py
--- a/sage/misc/html.py
+++ b/sage/misc/html.py
@@ -186,7 +186,7 @@
                 return ''
             elif EMBEDDED_MODE['frontend']=='sagecell':
                 import sys
-                sys._sage_messages.message_queue.display({'text/html':"<font color='black'>%s</font>"%t})
+                sys._sage_.display_message({'text/plain': 'table', 'text/html': "<font color='black'>%s</font>"%t})
                 return ''
         else:
             return ''
@@ -295,7 +295,7 @@
                 print "<html>"+output_string+"</html>"
             elif EMBEDDED_MODE['frontend']=='sagecell':
                 import sys
-                sys._sage_messages.message_queue.display({'text/html':output_string})
+                sys._sage_.display_message({'text/plain': 'html snippet', 'text/html': output_string})
 
     def table_str(self, x, header):
         import types
